## API网关 - 用户接口

/v1/user/

## API网关 - 新闻接口

/v1/news/

## API网关 - 数据接口

/v1/data/

## API网关 - 圈子接口

/v1/group/    含聚合逻辑的网关接口，粗粒度。  

### 0. 圈子的接口清单

方法 | 接口 | 用途 | 期待返回 
 :-- | :--  | :-- | :-- | :--
  | 圈子首页(上线版块| |
 GET | /sections?onlined=true | 获取所有的已上线圈子版块 | 版块信息[]  
  | 版块首页(版块+置顶贴+新帖)| |
 GET | /sections/{section_id} | 进入某个版块的首页 | 版块信息{}+置顶帖[]+最新贴[] 
 GET | /sections/{section_id}/topics?method=refresh&timestamp={timestamp}(分页)|版块首页下拉刷新获取新帖 | 新帖[] 
 GET | /sections/{section_id}/topics?method=history&timestamp={timestamp}(分页)|版块首页上拉加载获取旧帖 | 旧帖[] 
 POST| /sections/{section_id}/topics | 某个版块首页内发表新帖 | 该新帖{} 
  | 帖子详情页(主贴+回帖+回帖评论) | |
 GET | /sections/{section_id}/topics/{topic_id} | 某个帖子的详情页 | 主贴{} + 回复贴[] + 最新赞记录[]
 GET | /sections/{section_id}/topics/{topic_id}?userId={user_id}| 某个帖子属于楼主所发的详情页|主贴{} + 回复贴[] + 最新赞记录[]
 DELETE|/sections/{section_id}/topics/{topic_id} | 删除主贴(需权限认证) | 
 POST| /topics/{topic_id}/replys | 对某个主帖进行回帖 | 该回帖{} 
 POST| /topics/{topic_id}/praises| 对某个主帖进行赞   | 该赞{}
 GET | /topics/{topic_id}/praises| 获取该主贴的赞记录 | 赞记录[]
 GET | /topics/{topic_id}/praises?userId={user_id} | 查询某用户是否赞主贴 | 赞记录{}
 DELETE |/topics/{topic_id}/praises/{praise_id} | 取消赞 | 
 POST| /topics/{topic_id}/reports| 对某个主贴进行举报 | 举报记录{}
 POST| /topics/{topic_id}/shares| 对某个主贴进行分享 | 分享记录{}
 PUT | /topics/{topic_id} | 对某个主贴加入精华(需权限认证)(isBest=true) | 该贴{}
 PUT | /topics/{topic_id} | 对某个主贴加入置顶(需权限认证)(isTop=true) | 该贴{}
 PUT | /topics/{topic_id} | 修改主贴(需权限认证) | 该帖{}
 POST| /topics/{topic_id}/replys/{reply_id}/reports | 对某个回帖进行举报 | 举报记录{}
  | 回帖详情页 | | 
 GET | /topics/{topic_id}/replys/{reply_id} | 某个回帖的详情页 | 回复贴{}+评论[]
 POST| /topics/{topic_id}/replys/{reply_id}/comments | 对某个回帖进行评论 | 该评论{}
 
### 1. 圈子首页

```
GET  /v1/group/sections?onlined=true (获取上线的版块，因为中超有升降级，降级球队的版块第二年会被关闭)  

{
	"oper_code": "1",
	"data": {
		"sections": [
			{
				"id": "1", ->版块id
				"title": "中超联赛", -> 版块名称
				"logo": "", -> 版块的缩略图,为俱乐部队徽
				"name": "", -> 版块名称
				"clubId": "", -> 关联俱乐部id，中超联赛的版块不关联clubId
				"clubName": "", -> 关联俱乐部名称
				"leagueId": "", ->关联联赛id,联赛id不为空的时候，客户端显示大图
				"leagueName":"", ->关联联赛名称
				"topics": 3456, -> 发帖数
				"bgImage": "", ->背景图
				"orderNum": 1  ->显示排序
			},
			{},
			{}
		]
	}
}
```

### 2. 某个圈子-版块 首页


```
GET /v1/group/sections/{section_id}
	+ GET /group/v1/sections/{section_id} (版块基本信息)
	+ GET /group/v1/sections/{section_id}/topics?isTop=true (置顶信息)
	+ GET /group/v1/sections/{section_id}/topics?method=init (默认第一页帖子，并排除置顶贴)
	+ GET /user/v1/users/{user_id} (帖子关联的发帖人信息)

{
	"oper_code": "1",
	"data": {
		"section": {},  ->该版块信息
		"topedTopics": [
		], -> 版块置顶贴列表
		"topics":[
		] ->当前新帖列表
	}
}
```
### 2.1 圈子-版块-首页 下拉获取新帖

```
* GET /v1/group/sections/{section_id}/topics?method=refresh&timestamp={timestamp}
	+ GET /group/v1/sections/{section_id}/topics?method=refresh&timestamp={timestamp}
	+ GET /user/v1/users/{user_id}

{
	"oper_code": "1",
	"data": {
		"topics": []
	}
}
```

### 2.2 圈子-版块-首页 上拉翻页获取旧帖

* GET /v1/group/sections/{section_id}/topics?method=history&timestamp={timestamp}
	+ GET /group/v1/sections/{section_id}/topics?method=history&timestamp={timestamp}
	+ GET /user/v1/users/{user_id}

### 3. 某个圈子-版块 用户发表主题帖

需要信息:
* 帖子
	* 帖子标题
	* 帖子内容
	* 帖子@对象
	* 帖子附件图片

* POST /v1/group/app/sections/{section_id}/topcis (服务器检查敏感词)

### 4. 某个圈子-版块-帖子 详情页

需要信息:
* 主贴
* 主贴的获赞记录
* 回帖
* 回帖的有关评论

默认请求:

* GET /v1/group/sections/{section_id}/topics/{topic_id}
	+ GET /group/v1/sections/{section_id}/topics/{topic_id}
	+ GET /group/v1/sections/{section_id}/topics/{topic_id}/praises[?pagNum=1&pageSize=20]
	+ GET /group/v1/sections/{section_id}/topics/{topic_id}/replys[?pageNum=1&pageSize=20] (分页)
	+ GET /group/v1/sections/{section_id}/topics/{topic_id}/replys/{repla_id}/comment
	+ GET /user/v1/users/{user_id}

只看楼主(只获取发主贴人的相关主贴和回帖信息):

* GET /v1/group/sections/{section_id}/topics/{topic_id}?userId={user_id}
	+ GET /group/v1/sections/{section_id}/topics/{topic_id}?userId={user_id}
	+ GET /group/v1/sections/{section_id}/topics/{topic_id}/praises?userId={user_id}[&pagNum=1&pageSize=20]
	+ GET /group/v1/sections/{section_id}/topics/{topic_id}/replys?userId={user_id[&pageNum=1&pageSize=20] (分页)
	+ GET /group/v1/sections/{section_id}/topics/{topic_id}/replys/{reply_id}/comment[?pageNum=1&pageSize=10]
	+ GET /user/v1/users/{user_id}

#### 4.1 对主贴进行回帖

POST /v1/group/sections/{section_id}/topics/{topic_id}/replys

#### 5. 某个圈子-版块-帖子-回贴 详情页

* GET /v1/group/sections/{section_id}/topics/{topic_id}/replys/{reply_id}
	+ GET /group/v1/sections/{section_id}/topics/{topic_id}/replys/{reply_id}
	+ GET /group/v1/sections/{section_id}/topics/{topic_id}/replys/{reply_id}/comment[?pageNum=1&pageSize=10]

#### 5.1 回帖的评论

POST /v1/group/sections/{section_id}/topics/{topic_id}/replys/comments

#### 6. 删除 [发帖人,管理员]

#### 7. 点赞

#### 7. 分享

#### 8. 举报

#### 9. 置顶 [管理员]

#### 10.加精 [管理员]

####
